<div class="stock-registration-container">
  <!-- Header -->
  <div class="header-section">
    <h1 class="main-title">â• {{ 'add_stock.title' | translate }}</h1>
    <div class="blue-divider"></div>
  </div>

  <!-- Navigation -->
  <div class="navigation-section">
    <button routerLink="/secure/liste" class="nav-button">{{ 'add_stock.back_to_list' | translate }}</button>
    <button routerLink="/secure/menu" class="nav-button">{{ 'add_stock.home' | translate }}</button>
  </div>

  <!-- Form -->
  <div class="form-card">
    <h2 class="form-title">ğŸ“ {{ 'add_stock.new_entry' | translate }}</h2>

    <form [formGroup]="stockForm" (submit)="$event.preventDefault()" class="stock-form">
      <!-- Code Plan Field -->
      <div class="form-group">
        <input type="text"
               formControlName="codeComplet"
               placeholder=" "
               class="form-input"
               [class.is-invalid]="f['codeComplet'].invalid && f['codeComplet'].touched">
        <label class="input-label">{{ 'add_stock.code_plan' | translate }}</label>
        <!-- Validation Messages -->
        <div *ngIf="f['codeComplet'].invalid && f['codeComplet'].touched" class="error-message">
          <div *ngIf="f['codeComplet'].errors?.['required']">{{ 'add_stock.field_required' | translate }}</div>
          <div *ngIf="f['codeComplet'].errors?.['minlength'] || f['codeComplet'].errors?.['maxlength']">
            {{ 'add_stock.code_plan_length_error' | translate }}
          </div>
        </div>

        <!-- Duplicate Warning -->
        <div *ngIf="duplicateMessage" class="duplicate-warning">
          {{ duplicateMessage }}
        </div>
      </div>

      <!-- Code Baguette Field -->
      <div class="form-group">
        <input type="text"
               formControlName="emplacement"
               placeholder=" "
               class="form-input"
               [class.is-invalid]="f['emplacement'].invalid && f['emplacement'].touched">
        <label class="input-label">{{ 'add_stock.code_baguette' | translate }}</label>
        <!-- Validation Messages -->
        <div *ngIf="f['emplacement'].invalid && f['emplacement'].touched" class="error-message">
          <div *ngIf="f['emplacement'].errors?.['required']">{{ 'add_stock.field_required' | translate }}</div>
          <div *ngIf="f['emplacement'].errors?.['minlength']">
            {{ 'add_stock.code_baguette_length_error' | translate }}
          </div>
        </div>
      </div>

      <!-- Station Field -->
      <div class="form-group">
        <select formControlName="station"
                class="form-input"
                [class.is-invalid]="f['station'].invalid && f['station'].touched">
          <option value="">{{ 'add_stock.select_station' | translate }}</option>
          <option value="STATION_1">{{ 'add_stock.station_1' | translate }}</option>
          <option value="STATION_2">{{ 'add_stock.station_2' | translate }}</option>
          <option value="DELIVERED">{{ 'add_stock.delivered' | translate }}</option>
        </select>
        <label class="input-label">{{ 'add_stock.station' | translate }}</label>
        <!-- Validation Messages -->
        <div *ngIf="f['station'].invalid && f['station'].touched" class="error-message">
          <div *ngIf="f['station'].errors?.['required']">{{ 'add_stock.field_required' | translate }}</div>
        </div>
      </div>

      <!-- Submit Button -->
      <button type="submit"
              [disabled]="stockForm.invalid || duplicateFound"
              class="submit-button"
              (click)="onSubmit()">
        {{ isLoading ? ('add_stock.saving' | translate) : ('add_stock.save' | translate) }}
      </button>
    </form>
  </div>

  <!-- Footer -->
  <div class="footer-section">
    <p class="footer-text">{{ 'add_stock.footer' | translate }}</p>
  </div>
</div>
